<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace(命名空间)：映射文件的唯一标识 -->
<mapper namespace="com.enablue.mapper.TemplatePoolMapper">
    <!--添加-->
    <insert id="addTemplatePool"  useGeneratedKeys="true" keyColumn="template_id" keyProperty="templateId" parameterType="TemplatePool">
        INSERT INTO template_pool  (
        template_content,
        subject_id,
        type_id,
        answer_id,
        difficulty_grade,
        gmt_create,
        gmt_modified
        )
        VALUES
            (
                #{templatePool.templateContent},
                #{templatePool.subjectId},
                #{templatePool.typeId},
                #{templatePool.answerId},
                #{templatePool.difficultyGrade},
                #{templatePool.gmtCreate},
                #{templatePool.getModified}
            )
    </insert>
    <resultMap id="templatePoolMap" type="com.enablue.pojo.TemplatePool">
        <id column="template_id" property="templateId"></id>
        <result column="template_content" property="templateContent"/>
        <result column="subject_id" property="subjectId"/>
        <result column="type_id" property="typeId"/>
        <result column="answer_id" property="answerId"/>
        <result column="difficulty_grade" property="difficultyGrade"/>
        <result column="gmt_create" property="gmtCreate"/>
        <result column="gmt_modified" property="gmtModified"/>

    </resultMap>
    <select id="getTemplatePooList" parameterType="TemplatePool" resultMap="templatePoolMap">
        select template_id,template_content,subject_id,type_id,answer_id,difficulty_grade,gmt_create,gmt_modified
        from template_pool
        where 1=1
            <if test="templateId != null">
                and template_id = #{templateId}
            </if>
            <if test="subjectId != null">
                and subject_id = #{subjectId}
            </if>
            <if test="typeId != null">
                and type_id = #{typeId}
            </if>
            <if test="difficultyGrade != null">
                and difficulty_grade = #{difficultyGrade}
            </if>
            <if test="templateNum != null">
                order by rand() limit #{templateNum}
            </if>
    </select>

</mapper>